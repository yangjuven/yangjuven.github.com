--- 
layout: post
title: 神秘的__init__.py
comments: true
categories:
- python
status: publish
type: post
published: true
meta: 
  _edit_last: "1"
---
<p>Python中的module和package的作用不言而喻：Each module has its own private symbol table, which is used as the global symbol table by all functions defined in the module. Thus, the author of a module can use global variables in the module without worrying about accidental clashes with a user&rsquo;s global variables.而Packages are a way of structuring Python&rsquo;s module namespace by using &ldquo;dotted module names&rdquo;.</p>
<p>让package称为module那样的访问，__init__ .py 。一个文件夹A如果存在文件__init__.py(哪怕这个文件夹是空的)，就表明A不是一个简简单单的文件夹，而是一个包。</p>
<p>另外__init__.py控制着包的导入行为。比如现在存在这样一个pacakge：</p>
<p>Package1/&nbsp;</p>
<p>&nbsp;&nbsp; &nbsp;__init__.py</p>
<p>&nbsp;&nbsp; &nbsp;Module1.py</p>
<p>&nbsp;&nbsp; &nbsp;Module2.py</p>
<p>&nbsp;&nbsp; &nbsp;Package2/ __init__.py</p>
<p>&nbsp;&nbsp; &nbsp; &nbsp; Module1.py</p>
<p>&nbsp;&nbsp; &nbsp; &nbsp; Module2.py</p>
<p>如果执行语句：</p>
<pre name="code" class="python">import Package1
Package1.Module1</pre>
<p>肯定会报错</p>
<p><span style="color:#ff0000;">AttributeError: 'module' object has no attribute 'Module1'</span></p>
<p>为何？因为Module1只是Package1的一个submodule，并不是attribute，通过dir(package)就可以看出。如果想执行正确上面的语句，就必须在__init__.py中执行：</p>
<pre name="code" class="python">import Module1</pre>
<p>另外，语句</p>
<pre name="code" class="python">from Package1 import *</pre>
<p>到底import了那些，完全依靠__init__.py中的__all__属性。</p>
<p>另外，关于from和import需要注意的是：</p>
<blockquote>
<p>Note that when using from package import item, the item can be either a submodule (or subpackage) of the package, or some other name defined in the package, like a function, class or variable. The import statement first tests whether the item is defined in the package; if not, it assumes it is a module and attempts to load it. If it fails to find it, an ImportError exception is raised.</p>
<p>Contrarily, when using syntax like import item.subitem.subsubitem, each item except for the last must be a package; the last item can be a module or a package but can&rsquo;t be a class or function or variable defined in the previous item.</p>
</blockquote>
<p>Resouces &amp; References</p>
<ol>
<li><a href="http://docs.python.org/tutorial/modules.html" target="_blank">Modules</a></li>
<li><a href="http://www.yuanma.org/data/2008/1229/article_3456.htm" target="_blank">Python模块包中__init__.py文件的作用</a></li>
</ol>
